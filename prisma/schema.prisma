
generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

// prisma/schema.prisma
datasource db {
  provider  = "postgresql"
  url  	    = env("DATABASE_URL")
}

model Resume{
  id String @id @default(cuid())
  userId String

  title String?
  description String?
  photoURL String?
  colorHex String @default("#000000")
  borderStyle String @default("squircle")

  firstName String?
  lastName String?
  summary String?
  jobtitle String?
  city String?
  country String?
  phone String?
  email String?

  workExpereince WorkExpereince[]
  educations Education[]
  skills String[]

  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt

  @@map("resumes")
}

model WorkExpereince{
  id String @id @default(cuid())
  position String?
  company String?
  startDate DateTime?
  endDate DateTime?
  description String?

  resumeId String
  resume Resume @relation(fields: [resumeId], references: [id])

  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt

  @@map("work_expereinces")
}

model Education{
  id String @id @default(cuid())

  degree String?
  school String?
  startDate DateTime?
  endDate DateTime?

  resumeId String
  resume Resume @relation(fields: [resumeId], references: [id])

  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt

  @@map("educations")

}

model UserSubscription{
  id String @id @default(cuid())
  userId String @unique
  stripeCustomerId String @unique
  stripeSubscriptionId String @unique
  stripePriceId String
  stripeCurrentPeriodEnd DateTime
  stripeCancelAtPeriodEnd Boolean @default(false)

  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt

  @@map("user_subscriptions")
}

// adding subscription.ts will fetch the sub data from stripe. /lib/sub